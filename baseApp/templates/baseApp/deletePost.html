{% extends 'baseApp/base.html' %}

{% block content %}

<style>
    .post {
        width: 90%;
        border-left: 3px solid lightblue;
        padding-left: 5px;
        padding-top: 1px;
        border-bottom: 3px solid lightblue;
        border-radius: 20px;
    }
    .image {
        width: 100%;
        max-height: auto;
    }
    a {
        text-decoration: none;
    }
</style>

{% if request.user.is_authenticated %}

{% else %}

<a href="{% url 'loginUser' %}"> Login </a> or
<a href="{% url 'registerUser' %}"> Register </a> So You Can Post! <hr>

{% endif %}


{% block messages %}
{% endblock messages %}


{% for post in posts %}
    <div class="post">
        <h5>@{{post.user}} / {{post.created.date}}</h5>
        <a href="{% url 'comment' post.pk %}">
            <h2> {{post|slice:"500"|safe}} </h2>
        </a>
        {% if post.image %}
            <img src="{{ post.image.url }}" alt="" class="image" ><br>
        {% endif %}

        {% if request.user.is_authenticated %}
            {% if request.user == post.user %}
                {% if deletePost %}
                    {% if deletePost.id == post.id %}
                        <form action="" method="POST">
                            {% csrf_token %}
                            <small>
                                <p> Delete "{{deletePost}}"? </p>
                                <input type="submit" value="Yes"> |
                                <a href="{{ request.META.HTTP_REFERER }}"> No </a>
                            </small> <br><br>
                        </form>
                    {% endif %}
                {% else %}
                {% endif %}
            {% endif %}
        {% endif %}
    </div>
{% endfor %} <br>

{% endblock content %}